<? namespace Bitrix\Main;$GLOBALS['____1341301006']= array(base64_decode('ZmlsZ'.'V9l'.'eGlzdHM='),base64_decode(''.'c'.'3RydG9'.'1'.'cHBl'.'cg=='),base64_decode(''.'bW'.'Q1'),base64_decode('b'.'WQ'.'1'),base64_decode('a'.'W'.'5fYXJyYXk='),base64_decode('aW5fYX'.'Jy'.'YXk'.'='),base64_decode('a'.'W'.'5fYXJyY'.'X'.'k='),base64_decode('ZGVm'.'aW5'.'lZA=='),base64_decode('ZGVma'.'W'.'5lZA=='),base64_decode('ZGVmaW5lZA'.'=='),base64_decode('Zm'.'lsZV'.'9leGlz'.'dHM='),base64_decode(''.'Zm'.'lsZV9leGlzdHM='),base64_decode('Zm'.'ls'.'ZV9l'.'eGlzdHM='),base64_decode('Zml'.'sZV'.'9leGlzdH'.'M='),base64_decode('ZXh'.'wbG9kZQ='.'='));if(!function_exists(__NAMESPACE__.'\\___697847743')){function ___697847743($_792797811){static $_23473286= false; if($_23473286 == false) $_23473286=array('L2Jpd'.'H'.'JpeC9saWN'.'lb'.'nNlX2'.'t'.'leS5waH'.'A'.'=','','','REVNTw==',''.'REVNTw==','QklUUklY','T'.'ElDR'.'U5DRQ==','REVNTw==','L2t'.'l'.'eV'.'9'.'1c'.'GRhdGUucGhwP2xpY2'.'Vuc2Vfa'.'2'.'V5PQ==','JnR'.'vYmFza2'.'V0PXkmbGFuZ'.'z0=','cnU=','a3o=','Ynk=','aHR'.'0cHM6Ly'.'9kZ'.'X'.'Yu'.'M'.'W'.'Mt'.'Y'.'ml0cm'.'l4LnJ1L2xlYX'.'JuaW5'.'nL2'.'Nv'.'dXJzZS'.'9p'.'bmRl'.'eC5'.'waHA/Q0'.'9'.'VUl'.'N'.'FX0'.'l'.'E'.'PTEzNSZMR'.'VNTT0'.'5fSUQ'.'9MjU3MjA=','a'.'H'.'R'.'0cH'.'M6Ly'.'90cm'.'F'.'pbmluZy5iaXRy'.'aX'.'gyNC5jb20v'.'c3VwcG9y'.'dC90cm'.'F'.'pb'.'mluZ'.'y9jb3Vy'.'c2Uv'.'aW5kZX'.'gucGhwP0NP'.'VVJTR'.'V9JRD0xNzgmTEVTU09OX0lEPTI1OT'.'My'.'Jkx'.'F'.'U1N'.'PTl9Q'.'QVRIPT'.'E3NTIwLjE'.'3N'.'TYyLj'.'I'.'1'.'OT'.'MwLj'.'I'.'1OTMy','cnU=','Y'.'nk=','a3'.'o'.'=','ZGU=','Z'.'XU=','ZnI=',''.'cGw=',''.'aX'.'Q'.'=',''.'d'.'Ws=','ZXU'.'=','Y29t','ZW4=','REVN'.'T'.'w==',''.'WQ==','VElNRUxJTUlUX0V'.'E'.'SVRJT04=','WQ==','RU5D'.'T'.'0'.'RF','WQ==','U'.'2l0Z'.'UV4cG'.'lyZ'.'U'.'Rh'.'d'.'GU=','bW'.'Fpbg==','fnN1cHBv'.'cnRfZmluaXNoX2R'.'h'.'dGU=','WS1tLWQ=','WS1t'.'L'.'WQ=','Y'.'ml0cml4MjQ=','bW'.'Fpbg==','flBBU'.'kFNX0N'.'MS'.'UVOVF9MQ'.'U5H','aW50cmFu'.'Z'.'XQ=','ZW4=',''.'cnU=','bWFpbg==','dmVu'.'ZG9y','dWFf'.'Yml0cml4X'.'3BvcnRhbA'.'==','dWE=','Yml0'.'cml4'.'X3B'.'vcnRhbA'.'==','ZW4=','MWNfYm'.'l0cm'.'l4X3B'.'v'.'c'.'nRhbA'.'='.'=','cnU=','L2JpdHJpeC'.'9tb2'.'R1bGVzL21haW4vb'.'GFuZy91YQ==','dWE'.'=',''.'L2JpdHJ'.'peC9'.'tb2R1bGVzL2'.'1ha'.'W'.'4vbGF'.'uZy9i'.'eQ'.'==','Y'.'nk=','L'.'2'.'JpdHJpeC9tb2'.'R1bGVzL2'.'1haW4vbG'.'FuZy9r'.'e'.'g==','a3o=','L2'.'JpdHJp'.'eC9'.'tb'.'2R1bGVzL21ha'.'W4vbGF'.'u'.'Zy9ydQ==','cnU=','bWFpbg==','flBBUkFNX1BBU'.'lRO'.'RVJ'.'fSUQ=',''.'bWFpbg='.'=','UEFSQU1fT'.'UFYX1VTRVJ'.'T',''.'bWF'.'p'.'bg==',''.'fkNPVU5U'.'X0V'.'YVFJ'.'B','Tg==','WQ='.'=','Z'.'Xh'.'0'.'c'.'mFu'.'Z'.'XQ=','QU5EIFU'.'u'.'TE'.'F'.'T'.'VF9MT0dJTi'.'A+IA==','QU'.'5EIFUuT'.'EFTV'.'F9'.'MT0dJTiBJUyBOT1'.'QgT'.'lVMTA='.'=','aW50c'.'mFuZXQ=','ZXh0c'.'mFuZXQ=','ZXh0cmFuZXRfZ3Jvd'.'XA=','bWF'.'pbg==','fmxpY2'.'Vu'.'c2VfbmFtZQ==','bW'.'Fp'.'b'.'g'.'==',''.'fm'.'xpY'.'2Vuc'.'2VfY'.'2'.'9kZ'.'X'.'M=','','LA='.'=');return base64_decode($_23473286[$_792797811]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_646715366= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'ua' => 'https://util.bitrix.ua', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf', 'ua' => 'https://www.bitrix.ua/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; public function getKey(): string{ if($this->_646715366 === null){ $_762418570= Loader::getDocumentRoot(). ___697847743(0); $LICENSE_KEY= ___697847743(1); if($GLOBALS['____1341301006'][0]($_762418570)){ include($_762418570);} $this->_646715366=($LICENSE_KEY == ___697847743(2) || $GLOBALS['____1341301006'][1]($LICENSE_KEY) == ___697847743(3)? ___697847743(4): $LICENSE_KEY);} return $this->_646715366;} public function getHashLicenseKey(): string{ return $GLOBALS['____1341301006'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1341301006'][3](___697847743(5). $this->getKey(). ___697847743(6));} public function isDemoKey(): bool{ return $this->getKey() == ___697847743(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___697847743(8). $this->getHashLicenseKey(). ___697847743(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ $_1730786722= $this->getRegion(); if($GLOBALS['____1341301006'][4]($_1730786722,[___697847743(10), ___697847743(11), ___697847743(12)])){ return ___697847743(13);} return ___697847743(14);} public function getRenewalLink(): string{ $_1730786722= $this->getRegion(); if($GLOBALS['____1341301006'][5]($_1730786722,[___697847743(15), ___697847743(16), ___697847743(17), ___697847743(18)])){ return self::URL_RENEWAL_LICENSE[$_1730786722];} if($GLOBALS['____1341301006'][6]($_1730786722,[___697847743(19), ___697847743(20), ___697847743(21), ___697847743(22), ___697847743(23)])){ return self::URL_RENEWAL_LICENSE[___697847743(24)];} return self::URL_RENEWAL_LICENSE[___697847743(25)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___697847743(26)];} public function isDemo(): bool{ return $GLOBALS['____1341301006'][7](___697847743(27)) && DEMO === ___697847743(28);} public function isTimeBound(): bool{ return $GLOBALS['____1341301006'][8](___697847743(29)) && TIMELIMIT_EDITION === ___697847743(30);} public function isEncoded(): bool{ return $GLOBALS['____1341301006'][9](___697847743(31)) && ENCODE === ___697847743(32);} public function getExpireDate():?Date{ $_69419331= (int)($GLOBALS[___697847743(33)] ??(1080/2-540)); if($_69419331>(152*2-304)){ return Date::createFromTimestamp($_69419331);} return null;} public function getSupportExpireDate():?Date{ $_69419331= Option::get(___697847743(34), ___697847743(35)); if(Date::isCorrect($_69419331, ___697847743(36))){ return new Date($_69419331, ___697847743(37));} return null;} public function getRegion():?string{ if(Loader::includeModule(___697847743(38))){ return \CBitrix24::getPortalZone();} $_1730786722= Option::get(___697847743(39), ___697847743(40)); if(!empty($_1730786722)){ return $_1730786722;} $_1730786722= $this->__1207651181(); if(!empty($_1730786722)){ return $_1730786722;} return $this->__537709122();} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___697847743(41))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___697847743(42)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___697847743(43)];} private function __1207651181():?string{ $_2074020794= Option::get(___697847743(44), ___697847743(45)); if($_2074020794 === ___697847743(46)){ return ___697847743(47);} if($_2074020794 === ___697847743(48)){ return ___697847743(49);} if($_2074020794 === ___697847743(50)){ return ___697847743(51);} return null;} private function __537709122():?string{ $_1671834985= Application::getDocumentRoot(); if($GLOBALS['____1341301006'][10]($_1671834985. ___697847743(52))){ return ___697847743(53);} if($GLOBALS['____1341301006'][11]($_1671834985. ___697847743(54))){ return ___697847743(55);} if($GLOBALS['____1341301006'][12]($_1671834985. ___697847743(56))){ return ___697847743(57);} if($GLOBALS['____1341301006'][13]($_1671834985. ___697847743(58))){ return ___697847743(59);} return null;} public function getPartnerId(): int{ return (int)Option::get(___697847743(60), ___697847743(61),(149*2-298));} public function getMaxUsers(): int{ return (int)Option::get(___697847743(62), ___697847743(63), min(6,0,2));} public function isExtraCountable(): bool{ return Option::get(___697847743(64), ___697847743(65), ___697847743(66)) === ___697847743(67) && ModuleManager::isModuleInstalled(___697847743(68));} public function getActiveUsersCount(Date $_1048135103= null): int{ $_1079026286= Application::getConnection(); $_730269474=(244*2-488); if($_1048135103 !== null){  $_1676473006= ___697847743(69).$_1079026286->getSqlHelper()->convertToDbDate($_1048135103);} else{  $_1676473006= ___697847743(70);} if(ModuleManager::isModuleInstalled(___697847743(71))){ $_1099378217="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_1676473006}
			"; $_730269474= (int)$_1079026286->queryScalar($_1099378217); $_1904470288= (int)Option::get(___697847743(72), ___697847743(73)); if($_1904470288>(764-2*382) && $this->isExtraCountable()){ $_1099378217="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1904470288}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_1676473006}
							AND D.VALUE_ID IS NULL
					"; $_730269474 += (int)$_1079026286->queryScalar($_1099378217);}} return $_730269474;}  public function getName(): string{ return Option::get(___697847743(74), ___697847743(75));}  public function getCodes(): array{ $_1362047458= Option::get(___697847743(76), ___697847743(77)); if($_1362047458 != ___697847743(78)){ return $GLOBALS['____1341301006'][14](___697847743(79), $_1362047458);} return[];}}?>